<!DOCTYPE html>

<html>

<head>

	<meta http-equiv="content-language" content="ja">
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>
		プレーンページ
	</title>

	<!--<link rel="stylesheet" href="style.css" />-->
	<script src="/socket.io/socket.io.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<!--<script src="script.js" type="text/javascript"></script>-->
	<script type="text/javascript">
		var socket;
		$(function () {

		});

		// ①RKSに接続
		function ConnectRks() {
			// サーバーに接続
			socket = io.connect();

			// メッセージ受信イベント（PVを受信）
			socket.on('response', function (data) {
				//var a = data[0];
				//var b = String.fromCharCode.apply("", new Uint8Array(data));
				var arr_data = new Uint8Array(data);
				//$('#idPV').text(b);
				$('#idReceived').prepend(arr_data + '<br/>');		// デバッグ用に書き出し
			});

		}



		function debug1() {
			socket.emit('open-connection', $('#idPortName').val());
		}

		function debug2() {
			// 配列形式で送信する
			var url = [4, 48, 48, 90, 87, 5];

			socket.emit('path-through', url);
		}

		var my_interval;

		function debug3() {

			my_interval = setInterval(function () {
				debug2();
			}, 1500);


		}
		function debug4() {
			clearInterval(my_interval);
		}
/*
// send message
function sendSignal()
{
// 配列形式で送信する
//var url = [4, 48, 48, 90, 90, 5];

socket.emit('msg', "andoooo");
}
*/

	</script>
	<style type="text/css">

	</style>
</head>

<body>

	<button id="idConnect" onclick="ConnectRks()">接続</button><br />
	COMポート：<input type="text" size="20" id="idPortName" /><br />
	<button onclick="debug1()">Open SerialPort</button><br />
	<button onclick="debug2()">シリアルデータ送信</button>
	<button onclick="debug3()">定期送信開始</button>
	<button onclick="debug4()">定期送信終了</button><br />
	受信データ
	<div id="idReceived"></div><br />
	<hr />	



</body>

</html>